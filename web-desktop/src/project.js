window.__require=function o(t,e,n){function r(s,c){if(!e[s]){if(!t[s]){var h=s.split("/");if(h=h[h.length-1],!t[h]){var d="function"==typeof __require&&__require;if(!c&&d)return d(h,!0);if(i)return i(h,!0);throw new Error("Cannot find module '"+s+"'")}s=h}var a=e[s]={exports:{}};t[s][0].call(a.exports,function(o){return r(t[s][1][o]||o)},a,a.exports,o,t,e,n)}return e[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({block:[function(o,t,e){"use strict";cc._RF.push(t,"9b356vJ671Bjr9DRHC4nsSM","block"),cc.Class({extends:cc.Component,properties:{colorAtlas:cc.SpriteAtlas},onLoad:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this)},onDestroy:function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchend",this.onTouchEnd,this)},init:function(o){this.node.getComponent(cc.Sprite).spriteFrame=this.colorAtlas.getSpriteFrame(o%6),this.node.width=80+25*o},onTouchStart:function(o){this.startPos=this.node.position},onTouchMove:function(o){var t=o.getDelta();this.node.x+=t.x,this.node.y+=t.y},onTouchEnd:function(o){window.game.placeBlock(this.node)||(this.node.position=this.startPos)}}),cc._RF.pop()},{}],game:[function(o,t,e){"use strict";cc._RF.push(t,"c70daTVWdxMQZGI5mHpCT/L","game"),cc.Class({extends:cc.Component,properties:{blockLayerNode:cc.Node,blockPrefab:cc.Prefab,baseNodeArr:[cc.Node]},onLoad:function(){window.game=this,this.blockNodeArr=[[],[],[]],this.blockNum=5,this.initBlock(this.blockNum)},initBlock:function(o){o>=10&&(o=10);for(var t=0;t<this.blockNodeArr.length;t++)for(var e=this.blockNodeArr[t],n=0;n<e.length;n++)e[n].destroy();this.blockNodeArr=[[],[],[]];for(var r=0;r<o;r++){var i=cc.instantiate(this.blockPrefab);this.blockLayerNode.addChild(i);var s=Math.floor(3*Math.random());i.x=this.baseNodeArr[s].x,i.y=34*this.blockNodeArr[s].length-157,console.log(this.blockNodeArr),i.baseIndex=s,i.blockIndex=o-r-1,i.getComponent("block").init(o-r-1),this.blockNodeArr[s].push(i)}},baseIndexCheck:function(o){for(var t=0;t<this.baseNodeArr.length;t++){var e=this.baseNodeArr[t];if(o.x>=e.x-e.width/2&&o.x<=e.x+e.width/2)return t}return-1},placeBlock:function(o){var t=this.baseIndexCheck(o.position);if(-1==t)return!1;if(o.baseIndex==t)return!1;var e=this.blockNodeArr[t],n=this.blockNodeArr[o.baseIndex].length-1;if(o.blockIndex!=this.blockNodeArr[o.baseIndex][n].blockIndex)return!1;if(e.length&&e[e.length-1].blockIndex<=o.blockIndex)return!1;var r=this.baseNodeArr[t];o.x=r.x,this.blockNodeArr[o.baseIndex].pop(),this.blockNodeArr[t].push(o),o.baseIndex=t;var i=this.blockNodeArr[t].length;return o.y=34*(i-1)-157,this.blockNodeArr[2].length==this.blockNum&&this.initBlock(++this.blockNum),!0}}),cc._RF.pop()},{}]},{},["block","game"]);